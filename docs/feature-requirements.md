# 구현 요구사항 V1

## User
### 회원가입
- 사용자 이메일을 통해 회원가입 요청시, 비활성화 유저가 생성되고 데이터베이스에 정보를 저장한다.
- 시나리오
  1. 이메일, 비밀번호, 이름, 전화번호, 주소 정보를 입력받는다.
  2. 이메일 형식과 중복된 이메일인지 확인한다.
  3. 비밀번호 보안 요구 사항에 맞는지 확인한다. (8자리 이상, 대문자, 소문자, 숫자, 특수문자 포함)
  4. 비밀번호를 암호화한다.
  5. 전화번호와 주소를 암호화한다. (개인정보)
  6. 사용자 정보를 데이터베이스에 저장한다.

### 이메일 인증 요청
- 계정을 활성화시키기 위해 이메일 인증 요청을 하면 서버에서 mail 로 인증 코드를 보낸다.
- 시나리오
  1. 이메일 인증을 위한 이메일을 입력받는다.
  2. 랜덤 인증 번호 생성한다.
  3. 인증 번호를 Redis에 저장한다. (5분 동안 유효)
  4. 사용자 이메일로 인증 번호를 전송한다.

### 이메일 인증 확인
- 이메일 인증 코드를 확인하고 유저를 활성화시킨다.
- 시나리오
  1. 이메일 인증 코드를 입력 받는다.
  2. Redis에 저장된 인증 코드와 비교한다.
  3. 유저를 활성화시킨다. 
  4. 활성화된 유저를 데이터베이스에 저장한다.

### ~~로그인~~
- 유저가 로그인 요청시, 이메일과 비밀번호로 유저를 검증하고 토큰을 발급한다.
- 시나리오
  1. 이메일과 비밀번호를 입력받는다.
  2. 이메일과 비밀번호로 유저를 검증한다
  3. 검증 완료시, JWT 을 생성하여 전달한다.

### ~~로그아웃~~
- 로그아웃 요청시, 모든 기기에서 로그아웃 된다.
- 비밀번호 업데이트시 모든 기기에서 로그아웃 된다.

---
## Product
### 상품 정보 조회
- 등록된 상품 정보 리스트를 (기본) 10개씩 보여줍니다.
- 시나리오
  1. cursor, size 같은 페이징을 위한 정보를 입력받는다.
  2. 활성화된 상품을 데이터베이스에서 가져온다. (cursor, size 에 맞게)
  3. 상품 정보(이름, 가격, 설명)를 반환한다.
- 참고
  - 추후에 검색, 필터링 기능을 추가할 예정
  - 가격은 상품에 등록된 아이템들 중 최저가로 사용

### 상품 상세 정보 조회
- 상품 클릭시 상품의 아이템(색, 크기, 사이즈, 가격) 정보를 보여줍니다.
- 시나리오
  1. 상품 아이디를 입력받는다.
  2. 데이터베이스에서 상품 정보와 해당 상품의 아이템 정보를 가져온다.
  3. 상품(이름, 설명) + 아이템(가격, 색, 크기, 사이즈) 정보를 반환한다.
- 참고 
  - 색, 크기, 사이즈는 NULL 인 경우 반환하지 않는다.
  - 재고가 10개 이하인 경우는 재고도 함께 반환한다.

### 장바구니에 아이템 추가 
- 장바구니 버튼 클릭시, 해당 아이템이 장바구니에 등록됩니다.
- 시나리오
  1. 아이템 아이디와 유저 아이디를 입력받는다.
  2. 해당 아이템을 유저의 장바구니에 데이터베이스에 저장한다.
- 참고
  - 추후 로그인 기능 완성시, 유저 아이디 대신 토큰을 사용할 예정

### 장바구니 아이템 조회
- 장바구니에 있는 아이템 리스트를 조회한다.
- 시나리오
  1. 유저 아이디를 입력받는다.
  2. 해당 아이템을 유저의 장바구니에 저장된 아이템 정보를 데이터베이스에서 조회한다.
  3. 아이템 정보 리스트를 반환한다.
- 참고
  - 추후 로그인 기능 완성시, 유저 아이디 대신 토큰을 사용할 예정

---

## Order
편의를 위해 주문 후 D+1 에는 배송중, D+2 에는 배송이 완료된다.

주문상태 (준비중, 배송중, 배송 완료, 취소 완료, 반품중 ,반품완료)

### ~~단건 주문~~
- 상품 페이지에서 바로 상품을 주문할 수 있습니다.
- 시나리오
  1. 아이템 아이디와, 유저 아이디, 수량 정보를 입력받는다.
  2. 입력 받은 정보로 주문을 생성한다. (주문 완료)
  3. 주문을 데이터베이스에 저장한다.
- 참고
  - 추후 로그인 기능 완성시, 유저 아이디 대신 토큰을 사용할 예정

### 장바구니 주문
- 장바구니에 있는 아이템 리스트를 한번에 주문할 수 있습니다.
- 시나리오
  1. 아이템 - 수량 리스트와 유저 아이디를 입력받는다.
  2. 입력 받은 정보로 주문둘을 생성한다. (주문 완료)
  3. 주문을 데이터베이스에 저장한다.
- 참고
  - 추후 로그인 기능 완성시, 유저 아이디 대신 토큰을 사용할 예정

### 주문 내역 조회
- 모든 주문 내역을 조회합니다. (기본 10개씩)
- 시나리오
  1. 유저 아이디와 cursor, size 를 입력받는다.
  2. 데이터베이스에서 유저가 기지고 있는 주문 정보를 cursor, size 에 맞게 최신순으로 조회한다.
  3. 주문 정보 리스트를 반환한다. (주문상태 포함)
- 참고
  - 추후 로그인 기능 완성시, 유저 아이디 대신 토큰을 사용할 예정
  - 추후에 날짜 필터링 검색 고려

### 주문 취소
- 주문 상태가 준비중인 경우 주문을 취소하고 상품의 재고를 복구 시킵니다.
- 시나리오
  1. 주문 아이디를 입력받는다.
  2. 주문 상태가 배송중인지 확인한다.
  3. 해당 주문의 아이템의 재고를 복구한다.
  4. 주문 상태를 취소로 변경한다.

### 주문 반품
- 배송 완료 후 D+1일까지는 반품이 가능하다.
- 시나리오
  1. 주문 아이디를 입력받는다.
  2. 주문 상태가 배송 완료인지 확인한다
  3. 업데이트 날짜도 확인하여 배송 완료 후 하루가 지났는지 체크한다.
  4. 주문 상태를 반품중으로 변경한다.
  5. 신청 후 D+1 재고를 복구하고 반품완료로 주문상태를 변경한다.